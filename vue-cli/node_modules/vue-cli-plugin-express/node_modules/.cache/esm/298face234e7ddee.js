let chalk,nodemon,commandOptionsDefaults,serverUrl;_34e‍.x([["default",()=>_34e‍.o]]);_34e‍.w("chalk",[["default",["chalk"],function(v){chalk=v}]]);_34e‍.w("nodemon",[["default",["nodemon"],function(v){nodemon=v}]]);_34e‍.w("../config",[["commandOptionsDefaults",["commandOptionsDefaults"],function(v){commandOptionsDefaults=v}]]);_34e‍.w("../utils/serverUrl",[["default",["serverUrl"],function(v){serverUrl=v}]]);




const _34e‍anonymous=({
  srvPath,
}) => args => {
  return new Promise((resolve, reject) => {
    nodemon({
      exec: `npx vue-cli-service express:run --delay ${getFlatArgs(args)}`,
      watch: [srvPath],
      ext: 'js mjs json ts',
    });

    nodemon.on('restart', () => {
      console.log();
      _34e‍.g.console.log(chalk.bold.green(`  ⏳  Express server is restarting...`));
    });

    nodemon.on('crash', () => {
      console.log();
      _34e‍.g.console.log(chalk.bold.red(`  💥  Express server crashed!`));
      _34e‍.g.console.log(chalk.red(`     Waiting for changes...`));
    });

    nodemon.on('stdout', (...params) => {
      _34e‍.g.console.log(chalk.grey(...params));
    });

    nodemon.on('stderr', (...params) => {
      _34e‍.g.console.log(chalk.grey(...params));
    });

    nodemon.on('quit', () => {
      resolve();
      serverUrl.deleteFile();
      process.exit();
    });
  });
};_34e‍.d(_34e‍anonymous);

const getFlatArgs = (args) =>
  Object.keys(commandOptionsDefaults)
    .filter(option => args.hasOwnProperty(option))
    .map(option => {
      const value = args[option];
      return `--${option}` + (value !== true ? ` ${value}` : '');
    })
    .join(' ');
