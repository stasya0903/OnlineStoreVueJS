let fs,path,coalesce,prepareURLs,format;_34e‍.x([["default",()=>_34e‍.o]]);_34e‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_34e‍.w("path",[["default",["path"],function(v){path=v}]]);_34e‍.w("./misc",[["coalesce",["coalesce"],function(v){coalesce=v}]]);_34e‍.w("@vue/cli-service/lib/util/prepareURLs",[["default",["prepareURLs"],function(v){prepareURLs=v}]]);_34e‍.w("url",[["format",["format"],function(v){format=v}]]);





const tmpPath = path.resolve(__dirname, '.tmpServerUrl');

_34e‍.d({
  isSet () {
    return fs.existsSync(tmpPath);
  },
  getFromFile () {
    return fs.readFileSync(tmpPath, 'utf8');
  },
  writeToFile (url) {
    fs.writeFileSync(tmpPath, url);
  },
  deleteFile () {
    if (this.isSet()) {
      fs.unlinkSync(tmpPath);
    }
  },

  async findServerUrl (args, defaults) {
    const useHttps = coalesce(args.https, defaults.https);
    const protocol = useHttps ? 'https' : 'http';
    const host = coalesce(args.host, process.env.HOST, defaults.host);
    const port = await findPort(coalesce(args.port, process.env.PORT, defaults.port));
    const urls = prepareURLs(protocol, host, port);

    return {
      protocol,
      host,
      port,
      path,
      networkUrl: urls.lanUrlForTerminal,
      localUrl: format({ protocol, hostname: host, port, pathname: '/' }),
      localUrlForTerminal: urls.localUrlForTerminal,
      localUrlForBrowser: urls.localUrlForBrowser,
    };
  },
});

const findPort = wantedPort => {
  const portFinder = require('portfinder');
  portFinder.basePort = wantedPort;
  return portFinder.getPortPromise();
};
