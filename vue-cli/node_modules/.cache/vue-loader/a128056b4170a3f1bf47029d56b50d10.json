{"remainingRequest":"/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/src/components/CartDrop.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/src/components/CartDrop.vue","mtime":1582598414303},{"path":"/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Alena/Desktop/OnlineStoreVueJS/vue-cli/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydHttYXBHZXR0ZXJzLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnN9IGZyb20gJ3Z1ZXgnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2FydERyb3AiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcGk6IGBodHRwOi8vbG9jYWxob3N0OjMwMzAvYXBpL2NhcnRgLAogICAgICBzaG93OiBmYWxzZSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJnZXRKc29uIiwicHV0SnNvbiIsJ3Bvc3RKc29uJywnZGVsZXRlSnNvbicsJ2RlbGV0ZUl0ZW0nXSksCgogIH0sCiAgLyp7CiAgZGVsZXRlSXRlbShpdGVtKSB7CiAgICBsZXQgZmluZCA9IHRoaXMuYWxsSXRlbXNJbkJhc2tldC5maW5kKChlbCkgPT4gZWwuaWRfcHJvZHVjdCA9PT0gaXRlbS5pZF9wcm9kdWN0KTsKICAgIGxldCBpbmR4ID0gdGhpcy5hbGxJdGVtc0luQmFza2V0LmluZGV4T2YoaXRlbSk7CiAgICBpZiAoaXRlbS5xdWFudGl0eSA9PT0gMSkgewogICAgICB0aGlzLiRwYXJlbnQuZGVsZXRlSnNvbignL2FwaS9jYXJ0JywgaXRlbSkKICAgICAgICAudGhlbigoZGF0YSkgPT4gewogICAgICAgICAgaWYgKGRhdGEucmVzdWx0KSB7CiAgICAgICAgICAgIHRoaXMuYWxsSXRlbXNJbkJhc2tldC5zcGxpY2UoaW5keCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICB9IGVsc2UgewogICAgICB0aGlzLiRwYXJlbnQucHV0SnNvbihgL2FwaS9jYXJ0LyR7ZmluZC5pZF9wcm9kdWN0fWAsIHtxdWFudGl0eTogLTF9KQogICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgaWYgKGRhdGEucmVzdWx0KSB7CiAgICAgICAgICAgIHRoaXMuYWxsSXRlbXNJbkJhc2tldFtpbmR4XS5xdWFudGl0eS0tOwogICAgICAgICAgfQogICAgICAgIH0pCgogICAgfQoKICB9LAogIGFkZEl0ZW0oaXRlbSkgewogICAgbGV0IGZpbmQgPSB0aGlzLmFsbEl0ZW1zSW5CYXNrZXQuZmluZCgoZWwpID0+IGVsLmlkX3Byb2R1Y3QgPT09IGl0ZW0uaWRfcHJvZHVjdCk7CiAgICBpZiAoZmluZCkgewogICAgICB0aGlzLiRwYXJlbnQucHV0SnNvbihgL2FwaS9jYXJ0LyR7ZmluZC5pZF9wcm9kdWN0fWAsIHtxdWFudGl0eTogMX0pCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICBpZiAoZGF0YS5yZXN1bHQpIHsKICAgICAgICAgICAgZmluZC5xdWFudGl0eSsrCiAgICAgICAgICB9CiAgICAgICAgfSkKCiAgICB9IGVsc2UgewogICAgICBsZXQgaXRlbUluQ2FydCA9IE9iamVjdC5hc3NpZ24oe3F1YW50aXR5OiAxfSwgaXRlbSk7CiAgICAgIHRoaXMuJHBhcmVudC5wb3N0SnNvbignL2FwaS9jYXJ0JywgaXRlbUluQ2FydCkKICAgICAgICAudGhlbigoZGF0YSkgPT4gewogICAgICAgICAgaWYgKGRhdGEucmVzdWx0KSB7CiAgICAgICAgICAgIHRoaXMuYWxsSXRlbXNJbkJhc2tldC5wdXNoKGl0ZW1JbkNhcnQpCiAgICAgICAgICB9CiAgICAgICAgfSkKCgogICAgfQogIH0KfSwqLwogIGNvbXB1dGVkOiBtYXBHZXR0ZXJzKFsnYWxsSXRlbXNJbkJhc2tldCcsICdhbW91bnQnLCAndG90YWwnXSksCiAgLyp7CiAgICB0b3RhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWxsSXRlbXNJbkJhc2tldC5yZWR1Y2UoKHN1bSwgZWwpID0+IHN1bSArIGVsLnByaWNlICogZWwucXVhbnRpdHksIDApOwogICAgfSwKICAgIGFtb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWxsSXRlbXNJbkJhc2tldC5sZW5ndGg7CiAgICB9LAogICAgaXRlbXNJbmNhcnQoKXsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuYWxsUHJvZHVjdHNJbkNhcnQ7CiAgICB9CgogIH0sKi8KCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgdGhpcy5nZXRKc29uKHthcGk6dGhpcy5hcGksIGFjdGlvbjonZ2V0SXRlbXNJbkJhc2tldCd9KTsKCiAgfQp9Cgo="},{"version":3,"sources":["CartDrop.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA","file":"CartDrop.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"header__right\">\n    <div v-if=\"allItemsInBasket.length > 0\" v-show=\"show\" class=\"drop drop__cart drop_flex-column\"\n         id=\"drop__cart\">\n      <div class=\"cart-item\" v-for=\"item of allItemsInBasket\"\n      :key=\"item.id_product\">\n        <img class=\"cart-item__img\" alt=\"\"> <!--:src=\"item.img\"-->\n        <div class=\"cart-item__info\">\n          <p class=\"item_info__drop\">{{item.product_name}}</p>\n          <p class=\"rating\">\n            <i class=\"fas fa-star\"></i>\n            <i class=\"fas fa-star\"></i>\n            <i class=\"fas fa-star\"></i>\n            <i class=\"fas fa-star\"></i>\n            <i class=\"fas fa-star\"></i>\n          </p>\n          <p class=\"price__prop\"> {{item.quantity}} X $ {{item.price}} </p>\n        </div>\n        <div class=\"delete_btn__drop\">\n          <font-awesome-icon @click=\"deleteItem(item)\" id=\"deleteBtn\" class=\"fas fa-times-circle\" :icon=\"['fas', 'times-circle']\"/>\n        </div>\n      </div>\n      <div class=\"total_cart_drop\">\n        <p>TOTAL</p>\n        <p id=\"total\">$ {{total}}</p>\n      </div>\n      <div class=\"cart_drop_actions\">\n        <router-link to=\"/checkout\">\n\n          <div class=\"cart_drop_btn\">CHECKOUT</div>\n        </router-link>\n\n        <router-link to=\"/cart\">\n          <div class=\"cart_drop_btn\">GO TO CART</div>\n        </router-link>\n\n      </div>\n    </div>\n    <div class=\"drop drop__cart drop_flex-column\" v-else v-show=\"show\"><h3 class=\"pink\">Корзина\n      Пуста</h3></div>\n    <div @click=\"show = !show\" class=\"header__cart\">\n      <div class=\"count bounce-in-top\">\n        <span class=\"count__number\">{{amount}}</span>\n      </div>\n    </div>\n    <div @click=\"show = !show\" class=\"button button-flex drop_button\">My Account\n      <span class=\"button__arrow\">\n                        <i class=\"fas fa-sort-down\"></i>\n                    </span>\n    </div>\n  </div>\n</template>\n\n<script>\n  import{mapGetters, mapActions, mapMutations} from 'vuex'\n  export default {\n    name: \"CartDrop\",\n    data() {\n      return {\n        api: `http://localhost:3030/api/cart`,\n        show: false,\n      }\n    },\n    methods: {\n      ...mapActions([\"getJson\",\"putJson\",'postJson','deleteJson','deleteItem']),\n\n    },\n    /*{\n    deleteItem(item) {\n      let find = this.allItemsInBasket.find((el) => el.id_product === item.id_product);\n      let indx = this.allItemsInBasket.indexOf(item);\n      if (item.quantity === 1) {\n        this.$parent.deleteJson('/api/cart', item)\n          .then((data) => {\n            if (data.result) {\n              this.allItemsInBasket.splice(indx, 1);\n            }\n          })\n\n      } else {\n        this.$parent.putJson(`/api/cart/${find.id_product}`, {quantity: -1})\n          .then(data => {\n            if (data.result) {\n              this.allItemsInBasket[indx].quantity--;\n            }\n          })\n\n      }\n\n    },\n    addItem(item) {\n      let find = this.allItemsInBasket.find((el) => el.id_product === item.id_product);\n      if (find) {\n        this.$parent.putJson(`/api/cart/${find.id_product}`, {quantity: 1})\n          .then(data => {\n            if (data.result) {\n              find.quantity++\n            }\n          })\n\n      } else {\n        let itemInCart = Object.assign({quantity: 1}, item);\n        this.$parent.postJson('/api/cart', itemInCart)\n          .then((data) => {\n            if (data.result) {\n              this.allItemsInBasket.push(itemInCart)\n            }\n          })\n\n\n      }\n    }\n  },*/\n    computed: mapGetters(['allItemsInBasket', 'amount', 'total']),\n    /*{\n      total() {\n        return this.allItemsInBasket.reduce((sum, el) => sum + el.price * el.quantity, 0);\n      },\n      amount() {\n        return this.allItemsInBasket.length;\n      },\n      itemsIncart(){\n        return this.$store.getters.allProductsInCart;\n      }\n\n    },*/\n\n    async mounted() {\n     this.getJson({api:this.api, action:'getItemsInBasket'});\n\n    }\n  }\n\n</script>\n\n<style scoped>\n\n</style>"]}]}